<div class="base-container mw-md">
  <section id="text-contents">
    <h2><%= @text.title %></h2>
    <% if @movies.present? %>
        <div class="info_box">
            <p class="p-2 text-center">動画教材を視聴された上で，テキスト教材を元に手を動かすようにして下さい。</p>
        </div>
        <% @movies.each do |movie| %>
          <div class="container-fluid">
            <div class="row justify-content-md-center">
                <div class="col-12 col-md-6">
                  <div class="card border-dark mb-3">
                    <div class="card-header p-0">
                      <div class="embed-responsive embed-responsive-16by9">
                        <iframe width="560" height="315" src=<%= movie.url %> frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe>
                      </div>
                    </div>
                    <div class="card-body text-dark movie-body">
                      <p id="movie-<%= movie.id %>">
                        <% if @watched_movie_ids.include?(movie.id) %>
                          <%= render "movies/watch", movie: movie %>
                        <% else %>
                          <%= render "movies/unwatch", movie: movie %>
                        <% end %>
                      </p>
                      <p class="card-text movie-title">
                        <%= movie.title %>
                     </p>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        <% end %>
    <% end %>  
    <div class="markdown" ><%= markdown(@text.content) %></div>
    <div id="text-<%= @text.id %>">
      <% if @text.read_by?(current_user) %>
        <%= render "read", text: @text %>
      <% else %>
        <%= render "unread", text: @text %>
      <% end %>
    </div>
  </section>
</div>